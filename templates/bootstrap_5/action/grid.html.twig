{% extends attributes.template.base|default(agTemplate('base')) %}
{% block autogrid %}
    {{ include(attributes.template.grid.advanced_filter|default(agTemplate('grid.advanced_filter'))) }}
    {% set columnsCount = (fields|length) + (agRun(agIsAnyAllowed) ? 1 : 0) + (view.massActionFormView ? 1 : 0) %}
    <table class="table caption-top {{ attributes.html_class.table|default('') }}">
        {% block autogrid_grid_caption %}
            {% if attributes.title is not empty %}
                <caption class="text-center h4 text-secondary">
                    {{ attributes.title|trans }}
                </caption>
            {% endif %}
        {% endblock %}

        {% block autogrid_grid_header %}
            <thead class="{{ attributes.html_class.thead|default('') }}">
            <tr>
                {{ include(attributes.template.grid.column_header_massaction|default(agTemplate('grid.column_header_massaction'))) }}
                {% for field in fields %}
                    {{ include(attributes.template.grid.column_header|default(agTemplate('grid.column_header'))) }}
                {% endfor %}
                {{ include(attributes.template.grid.column_header_action|default(agTemplate('grid.column_header_action'))) }}
            </tr>
            </thead>
        {% endblock %}

        {% block autogrid_grid_footer %}
            <tfoot class="{{ attributes.html_class.tfoot|default('table-group-divider') }}">
            <tr>
                <td colspan="{{ columnsCount }}" class="ps-0 pe-0">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col col-3 text-start align-middle pt-1">
                                <b>{{ 'f0ska.autogrid.total'|trans }}: {{ view.pagination.count }}</b>
                            </div>
                            <div class="col col-6 text-center">
                                {{ include(attributes.template.grid.grid_pagiantion|default(agTemplate('grid.grid_pagiantion'))) }}
                            </div>
                            <div class="col col-3 text-end">
                                {{ include(attributes.template.grid.grid_number_per_page|default(agTemplate('grid.grid_number_per_page'))) }}
                                <a class="btn btn-sm {{ attributes.html_class.tfoot_btn|default('btn-outline-secondary') }}"
                                   href="#{{ attributes.container_id }}"
                                ><i class="bi bi-chevron-up"></i></a>
                            </div>
                        </div>
                    </div>
                </td>
            </tr>
            </tfoot>
        {% endblock %}

        {% block autogrid_grid_body %}
            <tbody class="{{ attributes.html_class.tbody|default('table-group-divider') }}">
            {% if rows is empty %}
                {% block autogrid_grid_body_empty %}
                    <tr>
                        <td class="text-muted" colspan="{{ columnsCount }}">
                            {{ 'f0ska.autogrid.empty'|trans }}
                        </td>
                    </tr>
                {% endblock %}
            {% endif %}
            {% for entity in rows %}
                {% block autogrid_grid_row %}
                    <tr class="{{ include(attributes.template.grid.row_class|default(agTemplate('grid.row_class'))) }}">
                        {{ include(attributes.template.grid.column_value_massaction|default(agTemplate('grid.column_value_massaction'))) }}
                        {% for field in fields %}
                            {{ include(attributes.template.grid.column_value|default(agTemplate('grid.column_value'))) }}
                        {% endfor %}
                        {{ include(attributes.template.grid.column_value_action|default(agTemplate('grid.column_value_action'))) }}
                    </tr>
                {% endblock %}
            {% endfor %}
            </tbody>
        {% endblock %}
    </table>
{% endblock %}
